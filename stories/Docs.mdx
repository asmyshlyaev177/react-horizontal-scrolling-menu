import { Meta } from '@storybook/blocks';

<Meta title="Docs" />

<div className="container">
  <div className='section-title'>
    # Docs
  </div>

## Quick start

Add library to your project

```
npm install --save react-horizontal-scrolling-menu
```

Start by <a href="/?path=/story/examples-simple" target="_blank">simple example</a> and use this documentation as a reference

You can ask for help or propose improvements at <a href="https://github.com/asmyshlyaev177/react-horizontal-scrolling-menu" target="_blank">library's github</a>

## Helpers and api

Children of main ScrollMenu component(arrows, fotter, items) can use **VisibilityContext** to access state and callbacks.
Function callbacks also pass context, eg `onWheel`, `onScroll` etc.

## Properties and callbacks

<table>
<tr>
  <th>Prop</th>
  <th>Signature</th>
</tr>

<tr>
  <td>LeftArrow</td>
  <td>React component</td>
</tr>

<tr>
  <td>RightArrow</td>
  <td>React component</td>
</tr>

<tr>
  <td>Header</td>
  <td>React component</td>
</tr>
<tr>
  <td>Footer</td>
  <td>React component</td>
</tr>
<tr>
  <td>onWheel</td>
  <td>(VisibilityContext, event) => void</td>
</tr>
<tr>
  <td>onScroll</td>
  <td>(VisibilityContext, event) => void, will fire _before_ scroll</td>
</tr>
<tr>
  <td>onInit</td>
  <td>(VisibilityContext) => void</td>
</tr>
<tr>
  <td>apiRef</td>
  <td>React.RefObject</td>
</tr>
<tr>
  <td>onUpdate</td>
  <td>(VisibilityContext) => void</td>
</tr>
<tr>
  <td>onMouseDown</td>
  <td>VisibilityContext) => (React.MouseEventHandler) => void</td>
</tr>
<tr>
  <td>onMouseUp</td>
  <td>VisibilityContext) => (React.MouseEventHandler) => void</td>
</tr>
<tr>
  <td>onMouseMove</td>
  <td>VisibilityContext) => (React.MouseEventHandler) => void</td>
</tr>
<tr>
  <td>onTouchMove</td>
  <td>(VisibilityContext) => (React.TouchEventHandler) => void</td>
</tr>
<tr>
  <td>onTouchStart</td>
  <td>(VisibilityContext) => (React.TouchEventHandler) => void</td>
</tr>
<tr>
  <td>onTouchEnd</td>
  <td>(VisibilityContext) => (React.TouchEventHandler) => void</td>
</tr>
<tr>
  <td>itemClassName</td>
  <td>ClassName of Item </td>
</tr>
<tr>
  <td>separatorClassName</td>
  <td>ClassName of Item's separator</td>
</tr>
<tr>
  <td>scrollContainerClassName</td>
  <td>ClassName of scrollContainer</td>
</tr>

<tr>
  <td>transitionDuration</td>
  <td>Duration of transitions in ms, default 500</td>
</tr>
<tr>
  <td>transitionBehavior</td>
  <td>'smooth' \|'auto' \| customFunction</td>
</tr>
<tr>
  <td>transitionEase</td>
  <td>Ease function, eg t => t\*(2-t)</td>
</tr>

<tr>
  <td>wrapperClassName</td>
  <td>ClassName of the outer-most div</td>
</tr>
<tr>
  <td>RTL</td>
  <td>Enable Right to left direction</td>
</tr>
<tr>
  <td>noPolyfill</td>
  <td>Don't use polyfill for scroll, no transitions</td>
</tr>
</table>

## VisibilityContext
<table>
  <tr>
    <th>Prop</th>
    <th>Signature</th>
  </tr>

  <tr>
    <td>getItemById</td>
    <td>itemId => IOItem \| undefined</td>
  </tr>

  <tr>
    <td>getItemElementById</td>
    <td>itemId => DOM Element \| null</td>
  </tr>
  <tr>
    <td>getItemByIndex</td>
    <td>index => IOItem \| undefined</td>
  </tr>
  <tr>
    <td>getItemElementByIndex</td>
    <td>index => DOM Element \| null</td>
  </tr>
  <tr>
    <td>getNextElement (use this first, result without separators)</td>
    <td>() => IOItem \| undefined</td>
  </tr>
  <tr>
    <td>getNextItem</td>
    <td>() => IOItem \| undefined</td>
  </tr>
  <tr>
    <td>getPrevElement (use this first, result without separators)</td>
    <td>() => IOItem \| undefined</td>
  </tr>
  <tr>
    <td>getPrevItem</td>
    <td>() => IOItem \| undefined</td>
  </tr>
  <tr>
    <td>initComplete</td>
    <td>boolean</td>
  </tr>
  <tr>
    <td>isFirstItemVisible</td>
    <td>boolean</td>
  </tr>
  <tr>
    <td>isItemVisible</td>
    <td>itemId => boolean</td>
  </tr>
  <tr>
    <td>isLastItem</td>
    <td>boolean</td>
  </tr>
  <tr>
    <td>isLastItemVisible</td>
    <td>boolean</td>
  </tr>
  <tr>
    <td>scrollNext</td>
    <td>(behavior, inline, block, ScrollOptions) => void</td>
  </tr>
  <tr>
    <td>scrollNext</td>
    <td>(behavior, inline, block, ScrollOptions) => void</td>
  </tr>
  <tr>
    <td>scrollToItem</td>
    <td>(item, behavior, inline, block, ScrollOptions) => void</td>
  </tr>
  <tr>
    <td>initComplete</td>
    <td>boolean</td>
  </tr>
  <tr>
    <td>items</td>
    <td>ItemsMap class instance</td>
  </tr>
  <tr>
    <td>scrollContainer</td>
    <td>Ref\<OuterContainer\></td>
  </tr>
  <tr>
    <td>visibleElements</td>
    <td>\['item1', 'item2'\]</td>
  </tr>
  <tr>
    <td>visibleElementsWithSeparators</td>
    <td>\['item1', 'item1-separator', 'item2'\]</td>
  </tr>
  <tr>
    <td>visibleItemsWithoutSeparators (deprecated, use visibleElements)</td>
    <td>\['item1', 'item2'\]</td>
  </tr>
  <tr>
    <td>visibleItems (deprecated, use visibleElementsWithSeparators)</td>
    <td>\['item1', 'item1-separator', 'item2'\]</td>
  </tr>
</table>

### Transition/Animation

NOTE: won't work with RTL prop

Can use `transitionDuration`, `transitionEase` and `transitionBehavior`
See [example](https://codesandbox.io/s/custom-transition-animation-n2pyn)

#### ScrollOptions for scrollToItem, scrollPrev, scrollNext

Will override transition\* options passed to ScrollMenu

```javascript
{
  // target,
  behavior, // 'smooth', 'auto' or custom function
    // inline,
    // block,
    {
      duration: number, // number in milliseconds
      ease: (t) => t, // ease function, more https://gist.github.com/gre/1650294#file-easing-js
    };
}
```

## Other helpers

### slidingWindow

Can get previous or next visible group of items with `slidingWindow(allItems: string[], visibleItems: string[])` helper, e.g

```Javascript
slidingWindow(allItems, visibleItems)
.prev()
// or .next()
```

### getItemsPos

Can get first, center and last items, e.g.

```Javascript
const prevGroup = slidingWindow(allItems, visibleItems).prev()
const { first, center: centerItem, last } = getItemsPos(prevGroup)

// and scroll to center item of previous group of items
scrollToItem(getItemById(centerItem, 'smooth', 'center'))

```

### apiRef

Can pass Ref object to Menu, current value will assigned as VisibilityContext. But `visibleItems` and some other values can be staled, so better use it only for firing functions like `scrollToItem`.

For scrolling use `apiRef.scrollToItem(apiRef.getItemElementById)` instead of `apiRef.scrollToItem(apiRef.getItemById)`.

Can get item outside of context via `apiRef.getItemElementById(id)` or directly via `` document.querySelector(`[data-key='${itemId}']`) ``.

</div>

<style>
  {`
  .container {
    margin-bottom: 48px;
  }

  .section {
    width: 100%;
    display: flex;
    flex-direction: row;
    gap: 20px;
  }

  `}
</style>
